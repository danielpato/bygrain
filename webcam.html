<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>PhotoBooth 98</title>
  <style>
    body {
      background: #c0c0c0;
      font-family: 'Tahoma', 'MS Sans Serif', sans-serif;
      margin: 0;
      padding: 40px 20px;
      text-align: center;
    }

    h1 {
      font-size: 20px;
      margin-bottom: 20px;
    }

    video {
      transform: scaleX(-1);
      border: 2px solid #000;
      width: 100%;
      max-width: 600px;
      margin-bottom: 20px;
    }

    canvas {
      display: none; /* Keep the original canvas hidden as it's used for capturing */
    }

    button {
      font-family: inherit;
      font-size: 14px;
      padding: 6px 18px;
      background: #d4d0c8;
      border: 2px solid #fff;
      border-right-color: #404040;
      border-bottom-color: #404040;
      box-shadow: inset -1px -1px #808080, inset 1px 1px #fff;
      cursor: pointer;
      margin-bottom: 20px; /* Add some space below the button */
    }

    button:active {
      border: 2px solid #404040;
      border-top-color: #fff;
      border-left-color: #fff;
      box-shadow: inset 1px 1px #808080, inset -1px -1px #fff;
    }

    /* Style for the displayed captured image */
    #capturedImage {
        border: 2px solid #000;
        max-width: 100%;
        height: auto;
        display: block; /* Ensures it takes its own line */
        margin: 20px auto 0 auto; /* Center the image and add margin above */
    }
  </style>
</head>
<body>

  <h1>ðŸŽ‰ Smile for the Camera! ðŸŽ‰</h1>
  <video id="video" autoplay playsinline></video><br>
  <button id="captureBtn">ðŸ“¸ Take Photo</button>
  <canvas id="canvas"></canvas>

  <img id="capturedImage" style="display:none;">

  <script>
    const video = document.getElementById("video");
    const canvas = document.getElementById("canvas");
    const captureBtn = document.getElementById("captureBtn");
    const capturedImage = document.getElementById("capturedImage");

    navigator.mediaDevices.getUserMedia({ video: true })
      .then(stream => video.srcObject = stream)
      .catch(err => alert("Webcam error: " + err));

    captureBtn.addEventListener("click", () => {
      canvas.width = video.videoWidth;
      canvas.height = video.videoHeight;
      const ctx = canvas.getContext("2d");

      // Mirror canvas to match video
      ctx.translate(canvas.width, 0);
      ctx.scale(-1, 1);
      ctx.drawImage(video, 0, 0, canvas.width, canvas.height);

      const imageData = canvas.toDataURL("image/png");
      
      // Display the captured image below the camera feed
      capturedImage.src = imageData;
      capturedImage.style.display = 'block';

      // Automatically download the photo
      const link = document.createElement("a");
      link.href = imageData;
      link.download = `photobooth_${Date.now()}.png`; // Unique filename
      document.body.appendChild(link); // Append to body to make it clickable in some browsers
      link.click();
      document.body.removeChild(link); // Clean up the link element
    });
  </script>
</body>
</html>
